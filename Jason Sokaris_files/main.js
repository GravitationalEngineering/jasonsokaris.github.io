function hasScrolled(){var e=$(this).scrollTop();Math.abs(lastScrollTop-e)<=delta||(e>lastScrollTop&&e>navbarHeight?$("#orderHeader").addClass("header-up"):e+$(window).height()<$(document).height()&&$("#orderHeader").removeClass("header-up"),lastScrollTop=e)}function windowResize(){"Fixed"==_4ORMAT_DATA.theme.menu_alignment&&Menu.setHeight()}function touchStartHandler(e){xDown=e.touches[0].clientX,yDown=e.touches[0].clientY}function touchMoveHandler(e){if(!(window.detectZoom.zoom()>1)&&xDown&&yDown&&!(e.touches.length>=2)){var t=e.touches[0].clientX,i=e.touches[0].clientY,n=xDown-t,o=yDown-i;Math.abs(n)>Math.abs(o)&&(n>0?$.fancybox.next():$.fancybox.prev()),xDown=null,yDown=null}}function isTyping(){var e=$(this);setTimeout(function(){""!=e.val()?e.parent().addClass("typing"):e.parent().removeClass("typing")},0)}var features;!function(e,t){t.transitions="transition"in e||"webkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e}(document.createElement("div").style,features||(features={}));var mobile=window.matchMedia("only screen and (max-width: 767px)"),mobileTablet=/android|ipad|opera mini/i.test(navigator.userAgent.toLowerCase());if((mobile.matches||mobileTablet)&&($(".gallery .order-asset-item").click(function(){$("body.gallery").addClass("fancybox-is-visible")}),$(document).on("click",".fancybox-close, .fancybox-overlay",function(){$("body.gallery").removeClass("fancybox-is-visible"),$("#orderHeader").removeClass("header-up")})),mobile.matches&&(_4ORMAT_DATA.theme.gallery_overlay_show_thumbnails||$("body.gallery").addClass("thumbnails-off"),$(document).on("keydown","input, textarea",isTyping),$(document).on("change","input, textarea",isTyping)),$(function(){$("[data-toggle-nav]").click(function(){$("body").toggleClass("menu-is-visible")}),$(".order-asset-item").each(function(e){"Large"==_4ORMAT_DATA.theme.gallery_image_size?e%2==1&&$(this).addClass("asset-right"):e%3==2&&$(this).addClass("asset-right")}),$("#mobileNavFader").on("touchmove touchend",function(){setTimeout(function(){$("body").removeClass("menu-is-visible")},0)}),$(window).on("hashchange",function(){var e=parseInt(window.location.hash.substr(1),10);isFinite(e)&&$.fancybox.isOpen?$.fancybox.jumpto(e):isNaN(e)&&$.fancybox.close()})}),mobile.matches){var didScroll,lastScrollTop=0,delta=5,navbarHeight=$("#orderHeader").outerHeight();$(window).scroll(function(){didScroll=!0}),setInterval(function(){didScroll&&(hasScrolled(),didScroll=!1)},250)}var App={scrollerWidth:0,init:function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),this.scrollerWidth=Helpers.getScrollerWidth(),Menu.init(),$("#using").length&&$("#using").clone().appendTo(".mobile-menu-using"),$("body").hasClass("listing")&&Listing.init(),$("body").hasClass("gallery")&&(Gallery.init(),Lightbox.init(),0!=window.location.hash.substring(1).length&&Lightbox.loadAsset(window.location.hash.substring(1))),$(window).on("throttledresize",windowResize)}},Menu={footer_is_sticky:!1,$footer:$(".js-nav-bottom"),$wrapper:$(".nav-wrapper"),init:function(){$(".nav-wrapper>.wrapper").fadeIn(500),$("#content").fadeIn(),"Fixed"==_4ORMAT_DATA.theme.menu_alignment&&this.setHeight(),$(".category>a").on("click",function(){$(this).parent().toggleClass("active")}),this.minHeight=this.getMinHeight()+this.$footer.height(),Menu.alignFooter(),$(window).on("resize",$.proxy(Menu.alignFooter,Menu)),Menu.positionContent(),$(window).on("resize",$.proxy(Menu.positionContent,Menu))},getMinHeight:function(){if(this.$wrapper.length){var e=Number(this.$wrapper.css("padding-top").replace("px","")),t=Number(this.$wrapper.css("padding-bottom").replace("px",""));return Math.ceil(this.$wrapper.find(".wrapper").height()+e+t)}return!1},alignFooter:function(){if(window.innerWidth<720)return!1;window.innerHeight<=this.minHeight&&this.footer_is_sticky?(this.$footer.removeClass("is_sticky"),this.footer_is_sticky=!1):window.innerHeight>this.minHeight&&!this.footer_is_sticky&&(this.$footer.addClass("is_sticky"),this.footer_is_sticky=!0)},setHeight:function(){$(".nav-wrapper").height($(window).height())},positionContent:function(){mobile.matches?setTimeout(function(){var e=0,t=0;if($(".pre_text").length)var e=$(".pre_text").height()+60;if($("body").hasClass("cart-enabled"))var t=$(".f-cart-button").height();var i=$(window).width(),n=$("#orderHeader").height()+.05*i;$("#content").css({"padding-top":n+"px"}),$("[data-mobile-nav]").css({"padding-bottom":n+e+t+"px"})},0):$("#content").css({"padding-top":0})}},Listing={init:function(){}},Gallery={container:null,assets:null,gallerySize:0,init:function(){this.gallerySize=_4ORMAT_DATA.page.assets.length,this.container=$(".assets-container"),this.assets=_4ORMAT_DATA.page.assets,this.container.bind("click",".asset:not(.asset-title)",function(e){$(e.target).children("._fancybox").trigger("click")}),Gallery.lazyload()},lazyload:function(){$(".lazyloading, .lazyloaded").parents(".asset").find(".loading").addClass("hidden"),$(document).on("lazybeforeunveil",function(e){$(e.target).parents(".asset").find(".loading").addClass("hidden")})}},Lightbox={lightboxSettings:{closeBtn:!0,nextClick:!0,arrows:!1,padding:0,margin:[40,100,40,100],iframe:{preload:!0},helpers:{overlay:{css:{background:_4ORMAT_DATA.theme.gallery_overlay_background_color}},title:{type:"inside"}},beforeShow:function(){$.fancybox.wrap.bind("contextmenu",function(){return!1});var e=_4ORMAT_DATA.page.assets[this.element.data("asset-id")];if("video"==e.type&&(this.width=this.height*e.video_ratio,this.aspectRatio=!0),!e.copy)return!0;"image"!=e.type&&"video"!=e.type||(this.title="<div class='centered_caption'>"+e.copy+"</div>"),"text"==e.type&&$("input, textarea").on("click",function(e){e.stopPropagation()})},afterLoad:function(){var e=this.element.data("asset-id"),t=_4ORMAT_DATA.page.assets[e];window.location.hash=e,"text"==t.type?this.content=t.copy:t.type,(mobile.matches||mobileTablet)&&(document.addEventListener("touchstart",touchStartHandler,!1),document.addEventListener("touchmove",touchMoveHandler,!1))},afterClose:function(){!1===mobile.matches&&(window.location="#"),(mobile.matches||mobileTablet)&&(document.removeEventListener("touchstart",touchStartHandler,!1),document.removeEventListener("touchmove",touchMoveHandler,!1))}},init:function(){_4ORMAT_DATA.theme.gallery_overlay_show_thumbnails&&(this.lightboxSettings.helpers.thumbs={width:50,height:50,source:function(e){return $(e.element).data("thumbnail")}}),$("._fancybox").fancybox(this.lightboxSettings)},loadAsset:function(e){$("._fancybox").eq(e).trigger("click")}},Helpers={getScrollerWidth:function(){var e=null,t=null,i=0,n=0;return e=document.createElement("div"),e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.width="100px",e.style.height="50px",e.style.overflow="hidden",t=document.createElement("div"),t.style.width="100%",t.style.height="200px",e.appendChild(t),document.body.appendChild(e),i=t.offsetWidth,e.style.overflow="auto",n=t.offsetWidth,document.body.removeChild(document.body.lastChild),i-n},calculateImageSizeW:function(e,t){var i,n=e[0],o=e[1];return i=n/t,o=Math.round(o/i),[t,o]}};$(function(){App.init()});var xDown=null,yDown=null;